# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.

openapi: 3.1.0
info:
  title: Cassandra Sidecar API
  description: Cassandra Sidecar API API description.
  version: 1.0.0
servers:
  - url: https://localhost:8080/api/v1
    description: Localhost server
tags:
  - name: healthchecks
    description: Different healthchecks endpoints
  - name: jobs
    description: Restore jobs operations
  - name: components
    description: Component endpoints
  - name: snapshots
    description: Snapshot endpoints
  - name: keyspaces
    description: Keyspaces endpoints
  - name: ring
    description: Ring endpoints
  - name: stats
    description: Stats endpoints
  - name: sstables
    description: SSTables endpoints
  - name: tokenrange
    description: Token Range endpoints
  - name: gossip
    description: Gossip endpoints
  - name: settings
    description: Settings endpoints
  - name: cdc
    description: CDC endpoints
paths:
  /__health:
    $ref: paths/__health.yaml
  /cassandra/__health:
    $ref: paths/cassandra___health.yaml
  /cassandra/gossip/__health:
    $ref: paths/cassandra_gossip___health.yaml
  /cassandra/native/__health:
    $ref: paths/cassandra_native___health.yaml
  /cassandra/jmx/__health:
    $ref: paths/cassandra_jmx___health.yaml
  /keyspace/{keyspace}/table/{table}/snapshots/{snapshot}/components/{component}:
    $ref: "paths/keyspace_keyspace_table_table_snapshots_snapshot_compon\
          ents_component.yaml"
  /keyspaces/{keyspace}/tables/{table}/snapshots/{snapshot}/components/{component}:
    $ref: "paths/keyspaces_keyspace_tables_table_snapshots_snapshot_comp\
          onents_component.yaml"
  /keyspaces/{keyspace}/tables/{table}/snapshots/{snapshot}/components/{index}/{component}:
    $ref: "paths/keyspaces_keyspace_tables_table_snapshots_snapshot_comp\
          onents_index_component.yaml"
  /keyspace/{keyspace}/table/{table}/snapshots/{snapshot}:
    $ref: paths/keyspace_keyspace_table_table_snapshots_snapshot.yaml
  /keyspaces/{keyspace}/tables/{table}/snapshots/{snapshot}:
    $ref: paths/keyspaces_keyspace_tables_table_snapshots_snapshot.yaml
  /schema/keyspaces:
    $ref: paths/schema_keyspaces.yaml
  /cassandra/schema:
    $ref: paths/cassandra_schema.yaml
  /schema/keyspaces/{keyspace}:
    $ref: paths/schema_keyspaces_keyspace.yaml
  /keyspaces/{keyspace}/schema:
    $ref: paths/keyspaces_keyspace_schema.yaml
  /cassandra/ring:
    $ref: paths/cassandra_ring.yaml
  /cassandra/ring/keyspaces/{keyspace}:
    $ref: paths/cassandra_ring_keyspaces_keyspace.yaml
  /cassandra/stats/connected-clients:
    $ref: paths/cassandra_stats_stats_connected-clients.yaml
  /cassandra/stats/streams:
    $ref: paths/cassandra_stats_streams.yaml
  /keyspaces/{keyspace}/token-range-replicas:
    $ref: paths/keyspaces_keyspace_token-range-replicas.yaml
  /uploads/{uploadId}/keyspaces/{keyspace}/tables/{table}/components/{component}:
    $ref: "paths/uploads_uploadId_keyspaces_keyspace_tables_table_compon\
          ents_component.yaml"
  /uploads/{uploadId}/keyspaces/{keyspace}/tables/{table}/import:
    $ref: paths/uploads_uploadId_keyspaces_keyspace_tables_table_import.yaml
  /uploads/{uploadId}:
    $ref: paths/uploads_uploadId.yaml
  /cassandra/gossip:
    $ref: paths/cassandra_gossip.yaml
  /time-skew:
    $ref: paths/time-skew.yaml
  /cassandra/settings:
    $ref: paths/cassandra_settings.yaml
  /keyspaces/{keyspace}/tables/{table}/restore-jobs:
    $ref: paths/keyspaces_keyspace_tables_table_restore-jobs.yaml
  /keyspaces/{keyspace}/tables/{table}/restore-jobs/{jobId}/slices:
    $ref: paths/keyspaces_keyspace_tables_table_restore-jobs_jobId_slices.yaml
  /keyspaces/{keyspace}/tables/{table}/restore-jobs/{jobId}:
    $ref: paths/keyspaces_keyspace_tables_table_restore-jobs_jobId.yaml
  /keyspaces/{keyspace}/tables/{table}/restore-jobs/{jobId}/abort:
    $ref: paths/keyspaces_keyspace_tables_table_restore-jobs_jobId_abort.yaml
  /keyspaces/{keyspace}/tables/{table}/restore-jobs/{jobId}/progress:
    $ref: "paths/keyspaces_keyspace_tables_table_restore-jobs_jobId_prog\
          ress.yaml"
  /cdc/segments:
    $ref: paths/cdc_segments.yaml
  /cdc/segments/{cdcSegment}:
    $ref: paths/cdc_segments_cdcSegment.yaml
components:
  securitySchemes:
    mTLS:
      description: mTLS authentication
      type: mutualTLS
